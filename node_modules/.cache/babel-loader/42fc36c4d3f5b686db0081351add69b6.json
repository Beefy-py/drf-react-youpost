{"ast":null,"code":"import _objectSpread from\"C:/Users/kenny/Projects/DRF_React_YouPost/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/Users/kenny/Projects/DRF_React_YouPost/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/kenny/Projects/DRF_React_YouPost/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/kenny/Projects/DRF_React_YouPost/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/kenny/Projects/DRF_React_YouPost/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Form from\"./../common/form\";import Joi from\"./../../utils/extendedJoi\";import axiosInstance from\"./../../baseAxios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserInfo=/*#__PURE__*/function(_Form){_inherits(UserInfo,_Form);var _super=_createSuper(UserInfo);function UserInfo(){var _this;_classCallCheck(this,UserInfo);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:{bio:\"\"},errors:{},pageBio:\"\",bioChangeActive:false};_this.schema={bio:Joi.string().min(10).max(300).label(\"Bio\")};_this.afterSubmit=function(){var bio=_this.state.data.bio;var pageBio=_this.state.pageBio;var currentUser=_this.props.currentUser;_this.setState({pageBio:bio});axiosInstance.put(\"user/list/\"+currentUser.id,_objectSpread(_objectSpread({},currentUser),{},{bio:bio}));_this.setState({bioChangeActive:false});};_this.editBio=function(){_this.setState({bioChangeActive:!_this.state.bioChangeActive});};return _this;}_createClass(UserInfo,[{key:\"componentDidMount\",value:function componentDidMount(){this.setState({pageBio:this.props.currentUser.bio});this.setState({data:{bio:this.props.currentUser.bio}});}},{key:\"afterChange\",value:function afterChange(inp){}},{key:\"render\",value:function render(){var _this$props=this.props,currentUser=_this$props.currentUser,darkCnxt=_this$props.darkCnxt;var _this$state=this.state,bioChangeActive=_this$state.bioChangeActive,pageBio=_this$state.pageBio;return/*#__PURE__*/_jsxs(\"div\",{className:darkCnxt.darkMode?\"user-info dark-page-shadow bg-dark text-light\":\"user-info border bg-light\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Your profile: \",/*#__PURE__*/_jsx(\"b\",{children:localStorage.getItem(\"currentUser\")}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"more-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Joined on\",\" \",/*#__PURE__*/_jsx(\"span\",{children:currentUser.date_joined?new Intl.DateTimeFormat(\"en-GB\",{dateStyle:\"full\"}).format(new Date(currentUser.date_joined)):\"\"})]}),/*#__PURE__*/_jsx(\"p\",{children:currentUser.email})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"bio\",children:[/*#__PURE__*/_jsx(\"p\",{children:pageBio}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-info\",onClick:this.editBio,children:bioChangeActive?\"Close\":\"Edit Bio\"}),bioChangeActive?/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:this.handleSubmit,children:[this.renderTextArea(\"bio\",\"Bio\"),this.renderButton(\"submit\")]}):\"\"]})]});}}]);return UserInfo;}(Form);export{UserInfo as default};","map":{"version":3,"sources":["C:/Users/kenny/Projects/drf_react_youpost/src/components/content/userInfo.jsx"],"names":["React","Component","Form","Joi","axiosInstance","UserInfo","state","data","bio","errors","pageBio","bioChangeActive","schema","string","min","max","label","afterSubmit","currentUser","props","setState","put","id","editBio","inp","darkCnxt","darkMode","localStorage","getItem","date_joined","Intl","DateTimeFormat","dateStyle","format","Date","email","handleSubmit","renderTextArea","renderButton"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Form from \"./../common/form\";\r\nimport Joi from \"./../../utils/extendedJoi\";\r\nimport axiosInstance from \"./../../baseAxios\";\r\n\r\nexport default class UserInfo extends Form {\r\n  componentDidMount() {\r\n    this.setState({ pageBio: this.props.currentUser.bio });\r\n    this.setState({ data: { bio: this.props.currentUser.bio } });\r\n  }\r\n\r\n  state = {\r\n    data: { bio: \"\" },\r\n    errors: {},\r\n\r\n    pageBio: \"\",\r\n\r\n    bioChangeActive: false,\r\n  };\r\n\r\n  schema = {\r\n    bio: Joi.string().min(10).max(300).label(\"Bio\"),\r\n  };\r\n\r\n  afterSubmit = () => {\r\n    const { bio } = this.state.data;\r\n    const { pageBio } = this.state;\r\n    const { currentUser } = this.props;\r\n\r\n    this.setState({ pageBio: bio });\r\n    axiosInstance.put(\"user/list/\" + currentUser.id, {\r\n      ...currentUser,\r\n      bio: bio,\r\n    });\r\n\r\n    this.setState({ bioChangeActive: false });\r\n  };\r\n\r\n  editBio = () => {\r\n    this.setState({ bioChangeActive: !this.state.bioChangeActive });\r\n  };\r\n\r\n  afterChange(inp) {}\r\n\r\n  render() {\r\n    const { currentUser, darkCnxt } = this.props;\r\n    const { bioChangeActive, pageBio } = this.state;\r\n\r\n    return (\r\n      <div\r\n        className={\r\n          darkCnxt.darkMode\r\n            ? \"user-info dark-page-shadow bg-dark text-light\"\r\n            : \"user-info border bg-light\"\r\n        }\r\n      >\r\n        <h4>\r\n          Your profile: <b>{localStorage.getItem(\"currentUser\")}</b>{\" \"}\r\n        </h4>\r\n        <div className=\"more-info\">\r\n          <p>\r\n            Joined on{\" \"}\r\n            <span>\r\n              {currentUser.date_joined\r\n                ? new Intl.DateTimeFormat(\"en-GB\", {\r\n                    dateStyle: \"full\",\r\n                  }).format(new Date(currentUser.date_joined))\r\n                : \"\"}\r\n            </span>\r\n          </p>\r\n          <p>{currentUser.email}</p>\r\n        </div>\r\n        <hr />\r\n        <div className=\"bio\">\r\n          <p>{pageBio}</p>\r\n          <button className=\"btn btn-outline-info\" onClick={this.editBio}>\r\n            {bioChangeActive ? \"Close\" : \"Edit Bio\"}\r\n          </button>\r\n          {bioChangeActive ? (\r\n            <form action=\"\" onSubmit={this.handleSubmit}>\r\n              {this.renderTextArea(\"bio\", \"Bio\")}\r\n              {this.renderButton(\"submit\")}\r\n            </form>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </div>\r\n        {/* <img\r\n                src=\"https://source.unsplash.com/random/1600x800\"\r\n                alt=\"random img\"\r\n              /> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}