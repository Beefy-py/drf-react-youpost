{"ast":null,"code":"import _classCallCheck from\"C:/Users/kenny/Projects/DRF_React_YouPost/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/kenny/Projects/DRF_React_YouPost/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/kenny/Projects/DRF_React_YouPost/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/kenny/Projects/DRF_React_YouPost/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link,Redirect}from\"react-router-dom\";import history from\"./../../history\";import DarkContext from\"./../../context/darkMode\";import ReactPaginate from\"react-paginate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserPosts=/*#__PURE__*/function(_Component){_inherits(UserPosts,_Component);var _super=_createSuper(UserPosts);function UserPosts(){var _this;_classCallCheck(this,UserPosts);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={offset:0,data:[],perPage:8,currentPage:0};_this.handlePageClick=function(e){var selectedPage=e.selected;var offset=selectedPage*_this.state.perPage;_this.setState({currentPage:selectedPage,offset:offset},function(){return _this.getUserPosts();});window.scrollTo(0,0);};return _this;}_createClass(UserPosts,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.posts){this.getUserPosts();}}},{key:\"getUserPosts\",value:function getUserPosts(){var data=this.props.posts;var slice=data.slice(this.state.offset,this.state.offset+this.state.perPage);var postData=slice.map(function(post){return/*#__PURE__*/_jsx(DarkContext.Consumer,{children:function children(darkContext){return/*#__PURE__*/_jsxs(\"div\",{className:darkContext.darkMode?\"user-post dark-page-shadow bg-dark\":\"user-post border bg-light\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:/*#__PURE__*/_jsx(Link,{to:\"/posts/\"+post.slug,className:darkContext.darkMode?\"text-light\":\"text-dark\",children:post.title.length>=20?post.title.substring(0,20)+\"...\":post.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"published\",children:new Intl.DateTimeFormat(\"en-GB\",{dateStyle:\"full\"}).format(new Date(post.published))}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions\",children:[/*#__PURE__*/_jsx(Link,{to:\"/update-post/\"+post.slug,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-wrench\"})}),/*#__PURE__*/_jsx(Link,{to:\"/delete-post/\"+post.slug,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt\"})})]})]},post.id);}},post.id);});this.setState({pageCount:Math.ceil(data.length/this.state.perPage),postData:postData});}},{key:\"render\",value:function render(){var _this2=this;var posts=this.props.posts;return/*#__PURE__*/_jsx(DarkContext.Consumer,{children:function children(darkContext){return/*#__PURE__*/_jsxs(React.Fragment,{children:[_this2.state.postData,/*#__PURE__*/_jsx(ReactPaginate,{previousLabel:\"previous\",nextLabel:\"next\",breakLabel:\"...\",breakClassName:\"break-me\",pageCount:_this2.state.pageCount,marginPagesDisplayed:3,pageRangeDisplayed:5,onPageChange:_this2.handlePageClick,containerClassName:\"pagination justify-content-center\",pageClassName:\"page-item\",pageLinkClassName:\"page-link\",previousClassName:darkContext.darkMode?\" bg-dark page-link\":\"page-link\",nextClassName:darkContext.darkMode?\" bg-dark page-link\":\"page-link\",activeClassName:\"active\"})]});}});}}]);return UserPosts;}(Component);export{UserPosts as default};","map":{"version":3,"sources":["C:/Users/kenny/Projects/drf_react_youpost/src/components/content/userPosts.jsx"],"names":["React","Component","Link","Redirect","history","DarkContext","ReactPaginate","UserPosts","state","offset","data","perPage","currentPage","handlePageClick","e","selectedPage","selected","setState","getUserPosts","window","scrollTo","props","posts","slice","postData","map","post","darkContext","darkMode","slug","title","length","substring","Intl","DateTimeFormat","dateStyle","format","Date","published","id","pageCount","Math","ceil"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport history from \"./../../history\";\r\nimport DarkContext from \"./../../context/darkMode\";\r\nimport ReactPaginate from \"react-paginate\";\r\n\r\nexport default class UserPosts extends Component {\r\n  state = { offset: 0, data: [], perPage: 8, currentPage: 0 };\r\n  componentDidMount() {\r\n    if (this.props.posts) {\r\n      this.getUserPosts();\r\n    }\r\n  }\r\n\r\n  getUserPosts() {\r\n    const data = this.props.posts;\r\n    const slice = data.slice(\r\n      this.state.offset,\r\n      this.state.offset + this.state.perPage\r\n    );\r\n    const postData = slice.map((post) => {\r\n      return (\r\n        <DarkContext.Consumer key={post.id}>\r\n          {(darkContext) => (\r\n            <div\r\n              key={post.id}\r\n              className={\r\n                darkContext.darkMode\r\n                  ? \"user-post dark-page-shadow bg-dark\"\r\n                  : \"user-post border bg-light\"\r\n              }\r\n            >\r\n              <div className=\"title\">\r\n                <Link\r\n                  to={\"/posts/\" + post.slug}\r\n                  className={darkContext.darkMode ? \"text-light\" : \"text-dark\"}\r\n                >\r\n                  {post.title.length >= 20\r\n                    ? post.title.substring(0, 20) + \"...\"\r\n                    : post.title}\r\n                </Link>\r\n              </div>\r\n              <div className=\"published\">\r\n                {new Intl.DateTimeFormat(\"en-GB\", {\r\n                  dateStyle: \"full\",\r\n                }).format(new Date(post.published))}\r\n              </div>\r\n              <div className=\"actions\">\r\n                <Link to={\"/update-post/\" + post.slug}>\r\n                  <i className=\"fas fa-wrench\"></i>\r\n                </Link>\r\n                <Link to={\"/delete-post/\" + post.slug}>\r\n                  <i className=\"fas fa-trash-alt\"></i>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </DarkContext.Consumer>\r\n      );\r\n    });\r\n\r\n    this.setState({\r\n      pageCount: Math.ceil(data.length / this.state.perPage),\r\n\r\n      postData,\r\n    });\r\n  }\r\n\r\n  handlePageClick = (e) => {\r\n    const selectedPage = e.selected;\r\n    const offset = selectedPage * this.state.perPage;\r\n\r\n    this.setState({ currentPage: selectedPage, offset: offset }, () =>\r\n      this.getUserPosts()\r\n    );\r\n\r\n    window.scrollTo(0, 0);\r\n  };\r\n\r\n  render() {\r\n    const { posts } = this.props;\r\n\r\n    return (\r\n      <DarkContext.Consumer>\r\n        {(darkContext) => (\r\n          <React.Fragment>\r\n            {this.state.postData}\r\n            <ReactPaginate\r\n              previousLabel={\"previous\"}\r\n              nextLabel={\"next\"}\r\n              breakLabel={\"...\"}\r\n              breakClassName={\"break-me\"}\r\n              pageCount={this.state.pageCount}\r\n              marginPagesDisplayed={3}\r\n              pageRangeDisplayed={5}\r\n              onPageChange={this.handlePageClick}\r\n              containerClassName={\"pagination justify-content-center\"}\r\n              pageClassName={\"page-item\"}\r\n              pageLinkClassName={\"page-link\"}\r\n              previousClassName={\r\n                darkContext.darkMode ? \" bg-dark page-link\" : \"page-link\"\r\n              }\r\n              nextClassName={\r\n                darkContext.darkMode ? \" bg-dark page-link\" : \"page-link\"\r\n              }\r\n              activeClassName={\"active\"}\r\n            />\r\n          </React.Fragment>\r\n        )}\r\n      </DarkContext.Consumer>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}