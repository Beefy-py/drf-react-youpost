{"ast":null,"code":"import _slicedToArray from\"C:/Users/kenny/Projects/DRF_React_YouPost/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext}from\"react\";import axios from\"axios\";import apiURL from\"../../apiUrl\";import{useEffect,useState}from\"react\";import DarkContext from\"../../context/darkMode\";import UserContext from\"../../context/userContext\";import{Link}from\"react-router-dom\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var SearchPage=function SearchPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var darkContext=useContext(DarkContext);var userContext=useContext(UserContext);useEffect(function(){axios.get(apiURL+\"search/\"+window.location.search).then(function(res){setPosts(res.data);console.log(res.data);});},[setPosts]);return/*#__PURE__*/_jsx(React.Fragment,{children:posts.length?/*#__PURE__*/_jsx(\"div\",{className:darkContext.darkMode?\"posts-results-section dark-page-shadow text-light\":\"posts-results-section border\",children:posts.map(function(post){var title=post.title,id=post.id,author=post.author,published=post.published,content=post.content;return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsx(Link,{to:\"/posts/\"+post.slug,children:/*#__PURE__*/_jsxs(\"h3\",{children:[\" \",title]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"author\",children:author?userContext.getAuthor(post.author):\"Anonymous\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"date\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"vertical-line\",children:\"|\"}),new Intl.DateTimeFormat(\"en-GB\",{dateStyle:\"full\"}).format(new Date(published))]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[content.substring(0,150)+\"...\",\" \",/*#__PURE__*/_jsxs(Link,{to:\"/posts/\"+post.slug,children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-info-circle\"})]})]})]},id);})}):/*#__PURE__*/_jsx(\"div\",{className:+darkContext.darkMode?\"no-results dark-page-shadow text-light\":\"no-results border bg-light\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"No Results \",/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-folder-open\"}),\"!\"]})})});};export default SearchPage;","map":{"version":3,"sources":["C:/Users/kenny/Projects/drf_react_youpost/src/components/content/searchPage.jsx"],"names":["React","useContext","axios","apiURL","useEffect","useState","DarkContext","UserContext","Link","SearchPage","posts","setPosts","darkContext","userContext","get","window","location","search","then","res","data","console","log","length","darkMode","map","post","title","id","author","published","content","slug","getAuthor","Intl","DateTimeFormat","dateStyle","format","Date","substring"],"mappings":"gKAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,KAAkC,OAAlC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,CAAAA,WAAP,KAAwB,wBAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,OAASC,IAAT,KAAqB,kBAArB,C,wFAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB,cAA0BJ,QAAQ,CAAC,EAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,WAAW,CAAGX,UAAU,CAACK,WAAD,CAA9B,CACA,GAAMO,CAAAA,WAAW,CAAGZ,UAAU,CAACM,WAAD,CAA9B,CAEAH,SAAS,CAAC,UAAM,CACdF,KAAK,CAACY,GAAN,CAAUX,MAAM,CAAG,SAAT,CAAqBY,MAAM,CAACC,QAAP,CAAgBC,MAA/C,EAAuDC,IAAvD,CAA4D,SAACC,GAAD,CAAS,CACnER,QAAQ,CAACQ,GAAG,CAACC,IAAL,CAAR,CACAC,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACC,IAAhB,EACD,CAHD,EAID,CALQ,CAKN,CAACT,QAAD,CALM,CAAT,CAOA,mBACE,KAAC,KAAD,CAAO,QAAP,WACGD,KAAK,CAACa,MAAN,cACC,YACE,SAAS,CACPX,WAAW,CAACY,QAAZ,CACI,mDADJ,CAEI,8BAJR,UAOGd,KAAK,CAACe,GAAN,CAAU,SAACC,IAAD,CAAU,CACnB,GAAQC,CAAAA,KAAR,CAAkDD,IAAlD,CAAQC,KAAR,CAAeC,EAAf,CAAkDF,IAAlD,CAAeE,EAAf,CAAmBC,MAAnB,CAAkDH,IAAlD,CAAmBG,MAAnB,CAA2BC,SAA3B,CAAkDJ,IAAlD,CAA2BI,SAA3B,CAAsCC,OAAtC,CAAkDL,IAAlD,CAAsCK,OAAtC,CACA,mBACE,aAAK,SAAS,CAAC,MAAf,wBACE,KAAC,IAAD,EAAM,EAAE,CAAE,UAAYL,IAAI,CAACM,IAA3B,uBACE,0BAAML,KAAN,GADF,EADF,cAIE,oCACE,UAAG,SAAS,CAAC,QAAb,UACGE,MAAM,CAAGhB,WAAW,CAACoB,SAAZ,CAAsBP,IAAI,CAACG,MAA3B,CAAH,CAAwC,WADjD,EADF,cAKE,WAAG,SAAS,CAAC,MAAb,wBACE,aAAM,SAAS,CAAC,eAAhB,eADF,CAEG,GAAIK,CAAAA,IAAI,CAACC,cAAT,CAAwB,OAAxB,CAAiC,CAChCC,SAAS,CAAE,MADqB,CAAjC,EAEEC,MAFF,CAES,GAAIC,CAAAA,IAAJ,CAASR,SAAT,CAFT,CAFH,GALF,GAJF,cAgBE,aAhBF,cAiBE,qBACGC,OAAO,CAACQ,SAAR,CAAkB,CAAlB,CAAqB,GAArB,EAA4B,KAD/B,CACsC,GADtC,cAEE,MAAC,IAAD,EAAM,EAAE,CAAE,UAAYb,IAAI,CAACM,IAA3B,WACG,GADH,cAEE,UAAG,SAAS,CAAC,oBAAb,EAFF,GAFF,GAjBF,GAA2BJ,EAA3B,CADF,CA2BD,CA7BA,CAPH,EADD,cAwCC,YACE,SAAS,CACP,CAAChB,WAAW,CAACY,QAAb,CACI,wCADJ,CAEI,4BAJR,uBAOE,iDACa,UAAG,KAAK,CAAC,oBAAT,EADb,OAPF,EAzCJ,EADF,CAwDD,CApED,CAsEA,cAAef,CAAAA,UAAf","sourcesContent":["import React, { useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport apiURL from \"../../apiUrl\";\r\nimport { useEffect, useState } from \"react\";\r\nimport DarkContext from \"../../context/darkMode\";\r\nimport UserContext from \"../../context/userContext\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst SearchPage = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const darkContext = useContext(DarkContext);\r\n  const userContext = useContext(UserContext);\r\n\r\n  useEffect(() => {\r\n    axios.get(apiURL + \"search/\" + window.location.search).then((res) => {\r\n      setPosts(res.data);\r\n      console.log(res.data);\r\n    });\r\n  }, [setPosts]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {posts.length ? (\r\n        <div\r\n          className={\r\n            darkContext.darkMode\r\n              ? \"posts-results-section dark-page-shadow text-light\"\r\n              : \"posts-results-section border\"\r\n          }\r\n        >\r\n          {posts.map((post) => {\r\n            const { title, id, author, published, content } = post;\r\n            return (\r\n              <div className=\"post\" key={id}>\r\n                <Link to={\"/posts/\" + post.slug}>\r\n                  <h3> {title}</h3>\r\n                </Link>\r\n                <div>\r\n                  <p className=\"author\">\r\n                    {author ? userContext.getAuthor(post.author) : \"Anonymous\"}\r\n                  </p>\r\n\r\n                  <p className=\"date\">\r\n                    <span className=\"vertical-line\">&#124;</span>\r\n                    {new Intl.DateTimeFormat(\"en-GB\", {\r\n                      dateStyle: \"full\",\r\n                    }).format(new Date(published))}\r\n                  </p>\r\n                </div>\r\n                <hr />\r\n                <p>\r\n                  {content.substring(0, 150) + \"...\"}{\" \"}\r\n                  <Link to={\"/posts/\" + post.slug}>\r\n                    {\" \"}\r\n                    <i className=\"fas fa-info-circle\"></i>\r\n                  </Link>\r\n                </p>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        <div\r\n          className={\r\n            +darkContext.darkMode\r\n              ? \"no-results dark-page-shadow text-light\"\r\n              : \"no-results border bg-light\"\r\n          }\r\n        >\r\n          <h3>\r\n            No Results <i class=\"fas fa-folder-open\"></i>!\r\n          </h3>\r\n        </div>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default SearchPage;\r\n"]},"metadata":{},"sourceType":"module"}