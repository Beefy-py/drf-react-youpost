{"ast":null,"code":"import _slicedToArray from\"C:/Users/kenny/Projects/DRF_React_YouPost/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import Posts from\"./posts\";import PostLoadingComponent from\"../actions/postLoading\";import{useState,useEffect,useContext}from\"react\";import DarkContext from\"./../../context/darkMode\";import{useHistory}from\"react-router-dom\";import axiosInstance from\"./../../baseAxios\";import ReactPaginate from\"react-paginate\";import{jsx as _jsx}from\"react/jsx-runtime\";var Body=function Body(_ref){var toggleShowSearchBar=_ref.toggleShowSearchBar;var darkContext=useContext(DarkContext);var history=useHistory();var PostLoading=PostLoadingComponent(Posts);var _useState=useState(\"latest\"),_useState2=_slicedToArray(_useState,2),currentlySortedBy=_useState2[0],setCurrentlySortedBy=_useState2[1];var _useState3=useState({loading:false,posts:null}),_useState4=_slicedToArray(_useState3,2),appState=_useState4[0],setAppState=_useState4[1];useEffect(function(){toggleShowSearchBar(true);getPosts();},[setAppState]);var getPosts=function getPosts(){setAppState({loading:true});axiosInstance.get().then(function(res){return setAppState({loading:false,posts:res.data});});};var allPosts=[];axiosInstance.get().then(function(res){return allPosts=res.data;});var getPostsByTag=function getPostsByTag(tag){if(appState.posts){if(tag===\"Lat\"){var filtered=allPosts.sort(function(p1,p2){return p2.id-p1.id;});setAppState({posts:filtered});setCurrentlySortedBy(\"latest\");}if(tag===\"Old\"){var _filtered=allPosts.sort(function(p1,p2){return p1.id-p2.id;});setAppState({posts:_filtered});setCurrentlySortedBy(\"oldest\");}if(tag===\"MPo\"){var _filtered2=allPosts.sort(function(p1,p2){return p2.rating-p1.rating;});setAppState({posts:_filtered2});setCurrentlySortedBy(\"most popular\");}if(tag===\"LPo\"){var _filtered3=allPosts.sort(function(p1,p2){return p1.rating-p2.rating;});setAppState({posts:_filtered3});setCurrentlySortedBy(\"least popular\");}/*\r\n      const filteredPosts = appState.posts.filter(\r\n        (post) => post.category === tag\r\n      );\r\n\r\n      console.log(filteredPosts);\r\n\r\n      setAppState({ posts: filteredPosts });\r\n\r\n\r\n*/return\"display posts by \"+tag;}};return/*#__PURE__*/_jsx(PostLoading,{rows:3,getPostsByTag:getPostsByTag,isLoading:appState.loading,posts:appState.posts,curSorted:currentlySortedBy});};export default Body;","map":{"version":3,"sources":["C:/Users/kenny/Projects/drf_react_youpost/src/components/content/body.jsx"],"names":["React","Posts","PostLoadingComponent","useState","useEffect","useContext","DarkContext","useHistory","axiosInstance","ReactPaginate","Body","toggleShowSearchBar","darkContext","history","PostLoading","currentlySortedBy","setCurrentlySortedBy","loading","posts","appState","setAppState","getPosts","get","then","res","data","allPosts","getPostsByTag","tag","filtered","sort","p1","p2","id","rating"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Posts from \"./posts\";\r\nimport PostLoadingComponent from \"../actions/postLoading\";\r\nimport { useState, useEffect, useContext } from \"react\";\r\nimport DarkContext from \"./../../context/darkMode\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axiosInstance from \"./../../baseAxios\";\r\nimport ReactPaginate from \"react-paginate\";\r\n\r\nconst Body = ({ toggleShowSearchBar }) => {\r\n  const darkContext = useContext(DarkContext);\r\n  let history = useHistory();\r\n\r\n  const PostLoading = PostLoadingComponent(Posts);\r\n  const [currentlySortedBy, setCurrentlySortedBy] = useState(\"latest\");\r\n  const [appState, setAppState] = useState({ loading: false, posts: null });\r\n\r\n  useEffect(() => {\r\n    toggleShowSearchBar(true);\r\n    getPosts();\r\n  }, [setAppState]);\r\n\r\n  const getPosts = () => {\r\n    setAppState({ loading: true });\r\n\r\n    axiosInstance\r\n      .get()\r\n      .then((res) => setAppState({ loading: false, posts: res.data }));\r\n  };\r\n\r\n  let allPosts = [];\r\n  axiosInstance.get().then((res) => (allPosts = res.data));\r\n\r\n  const getPostsByTag = (tag) => {\r\n    if (appState.posts) {\r\n      if (tag === \"Lat\") {\r\n        const filtered = allPosts.sort((p1, p2) => p2.id - p1.id);\r\n        setAppState({ posts: filtered });\r\n        setCurrentlySortedBy(\"latest\");\r\n      }\r\n\r\n      if (tag === \"Old\") {\r\n        const filtered = allPosts.sort((p1, p2) => p1.id - p2.id);\r\n        setAppState({ posts: filtered });\r\n        setCurrentlySortedBy(\"oldest\");\r\n      }\r\n\r\n      if (tag === \"MPo\") {\r\n        const filtered = allPosts.sort((p1, p2) => p2.rating - p1.rating);\r\n        setAppState({ posts: filtered });\r\n        setCurrentlySortedBy(\"most popular\");\r\n      }\r\n\r\n      if (tag === \"LPo\") {\r\n        const filtered = allPosts.sort((p1, p2) => p1.rating - p2.rating);\r\n        setAppState({ posts: filtered });\r\n        setCurrentlySortedBy(\"least popular\");\r\n      }\r\n\r\n      /*\r\n      const filteredPosts = appState.posts.filter(\r\n        (post) => post.category === tag\r\n      );\r\n\r\n      console.log(filteredPosts);\r\n\r\n      setAppState({ posts: filteredPosts });\r\n\r\n\r\n*/\r\n      return \"display posts by \" + tag;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <PostLoading\r\n      rows={3}\r\n      getPostsByTag={getPostsByTag}\r\n      isLoading={appState.loading}\r\n      posts={appState.posts}\r\n      curSorted={currentlySortedBy}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Body;\r\n"]},"metadata":{},"sourceType":"module"}