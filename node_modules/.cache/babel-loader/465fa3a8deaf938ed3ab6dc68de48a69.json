{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kenny\\\\Projects\\\\djangotutorials\\\\drf_react_project\\\\react_frontend\\\\blogapi\\\\src\\\\components\\\\content\\\\posts.jsx\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport DarkContext from \"./../../context/darkMode\";\nimport ReactPaginate from \"react-paginate\";\nimport UserContext from \"./../../context/userContext\";\nimport ReactTooltip from \"react-tooltip\";\nimport axiosInstance from \"./../../baseAxios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      offset: 0,\n      data: [],\n      perPage: 6,\n      currentPage: 0\n    };\n\n    this.renderTags = tagList => {\n      /* <button\r\n            onClick={getPostsByTag(\"latest\")}\r\n            className={\r\n              darkContext.darkMode ? \"badge badge-light\" : \"badge badge-dark\"\r\n            }\r\n          >\r\n            latest\r\n          </button>\r\n        */\n      return tagList.map(tag => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.props.getPostsByTag(tag.id),\n        className: \"badge \" + tag.styling,\n        children: tag.name\n      }, tag.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 7\n      }, this));\n    };\n\n    this.reactToPost = (postId, vote) => {\n      console.log(\"reacted to \" + postId + \" with \" + vote);\n    };\n\n    this.getFormattedRating = rating => {\n      if (rating > 999999) {\n        const num = (rating / 1000000).toFixed(1);\n        return `${num}M`;\n      }\n\n      if (rating > 999) {\n        const num = (rating / 1000).toFixed(1);\n        return `${num}K`;\n      }\n\n      return rating.toString();\n    };\n\n    this.handlePageClick = e => {\n      const selectedPage = e.selected;\n      const offset = selectedPage * this.state.perPage;\n      this.setState({\n        currentPage: selectedPage,\n        offset: offset\n      }, () => this.receivedData());\n      window.scrollTo(0, 0);\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.posts) {\n      this.receivedData();\n    }\n  }\n\n  likeDislike(post, action) {\n    if (action === \"like\") {\n      const postRate = parseInt(post.rating);\n      console.log(postRate, post.slug);\n      axiosInstance.put(\"update-post/\", post.slug, {\n        rating: postRate + 1\n      }).then(res => console.log(res.data)).catch(res => console.log(res.response));\n    }\n  }\n\n  receivedData() {\n    const data = this.props.posts;\n    const slice = data.slice(this.state.offset, this.state.offset + this.state.perPage);\n    const postData = slice.map(post => {\n      const {\n        title,\n        content,\n        slug,\n        author,\n        image,\n        rating\n      } = post;\n      const postDate = new Intl.DateTimeFormat(\"en-GB\", {\n        month: \"long\",\n        year: \"numeric\",\n        day: \"numeric\"\n      }).format(new Date(post.published));\n      const day = new Date(postDate).toLocaleString(\"en-us\", {\n        weekday: \"long\"\n      });\n      console.log(image);\n      const dataType = this.context.darkMode ? \"light\" : \"dark\";\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: this.context.darkMode ? \"blog-post text-light border bg-dark\" : \"blog-post border\",\n        children: [/*#__PURE__*/_jsxDEV(ReactTooltip, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"blog-post-img border\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: image,\n            alt: \"Image for: \" + post.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"blog-post-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"blog-post-date\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: day\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: postDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"blog-post-author\",\n            children: /*#__PURE__*/_jsxDEV(UserContext.Consumer, {\n              children: userContext => {\n                return /*#__PURE__*/_jsxDEV(React.Fragment, {\n                  children: [\"by \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: userContext.getAuthor(author)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 114,\n                    columnNumber: 26\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 21\n                }, this);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"blog-post-title\",\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"blog-post-text\",\n            children: content.length >= 500 ? content.substring(0, 500) + \"...\" : content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"posts/\" + slug,\n            className: \"blog-post-cta\",\n            children: \"Read More\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"blog-post-options\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"react\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rating badge badge-primary\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                \"data-tip\": \"rating: \" + rating.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\"),\n                \"data-type\": dataType,\n                children: rating ? this.getFormattedRating(rating) : 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upvote\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                \"data-tip\": \"like\",\n                \"data-type\": dataType,\n                onClick: () => this.likeDislike(post, \"like\"),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-thumbs-up\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"downvote\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-danger\",\n                \"data-tip\": \"dislike\",\n                \"data-type\": dataType,\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-thumbs-down\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"other-react\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bookmark\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-secondary\",\n                \"data-tip\": \"add to bookmarks\",\n                \"data-type\": dataType,\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"far fa-bookmark\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"comment\",\n              \"data-tip\": \"comment on this post\",\n              \"data-type\": dataType,\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-secondary\",\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  style: {\n                    fontSize: \".8rem\"\n                  },\n                  className: \"far fa-comment-alt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)]\n      }, post.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this);\n    });\n    this.setState({\n      pageCount: Math.ceil(data.length / this.state.perPage),\n      postData\n    });\n  }\n\n  render() {\n    const {\n      posts\n    } = this.props;\n    const {\n      renderTags,\n      reactToPost\n    } = this;\n    const pageLinkClassName = this.context.darkMode ? \" bg-dark page-link text-light\" : \"page-link\";\n    return /*#__PURE__*/_jsxDEV(DarkContext.Consumer, {\n      children: darkContext => /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"main\", {\n          className: darkContext.darkMode ? \"bg-dark dark-page-shadow \" : \"bg-light border\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"post-tags\",\n            children: renderTags([{\n              name: \"latest\",\n              styling: \"btn-primary\",\n              id: \"Lat\"\n            }, {\n              name: \"most popular\",\n              styling: \"btn-success\",\n              id: \"MPo\"\n            }, {\n              name: \"least popular\",\n              styling: \"btn-danger\",\n              id: \"LPo\"\n            }, {\n              name: \"oldest\",\n              styling: \"btn-warning\",\n              id: \"Old\"\n            }])\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: darkContext.darkMode ? \"sorted-by text-light\" : \"sorted-by\",\n            children: [\"Sorted By:\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-filter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 19\n              }, this), \" \", this.props.curSorted]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n            className: darkContext.darkMode ? \"posts-section-dark posts-section\" : \"posts-section\",\n            children: this.state.postData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this), \" \", /*#__PURE__*/_jsxDEV(ReactPaginate, {\n          previousLabel: \"previous\",\n          nextLabel: \"next\",\n          breakLabel: \"...\",\n          breakClassName: \"break-me\",\n          pageCount: this.state.pageCount,\n          marginPagesDisplayed: 3,\n          pageRangeDisplayed: 5,\n          onPageChange: this.handlePageClick,\n          containerClassName: \"pagination justify-content-center\",\n          pageClassName: \"page-item\",\n          pageLinkClassName: pageLinkClassName,\n          previousClassName: pageLinkClassName,\n          nextClassName: pageLinkClassName,\n          activeClassName: \"active\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nApp.contextType = DarkContext;","map":{"version":3,"sources":["C:/Users/kenny/Projects/djangotutorials/drf_react_project/react_frontend/blogapi/src/components/content/posts.jsx"],"names":["React","Component","Link","DarkContext","ReactPaginate","UserContext","ReactTooltip","axiosInstance","App","state","offset","data","perPage","currentPage","renderTags","tagList","map","tag","props","getPostsByTag","id","styling","name","reactToPost","postId","vote","console","log","getFormattedRating","rating","num","toFixed","toString","handlePageClick","e","selectedPage","selected","setState","receivedData","window","scrollTo","componentDidMount","posts","likeDislike","post","action","postRate","parseInt","slug","put","then","res","catch","response","slice","postData","title","content","author","image","postDate","Intl","DateTimeFormat","month","year","day","format","Date","published","toLocaleString","weekday","dataType","context","darkMode","userContext","getAuthor","length","substring","replace","fontSize","pageCount","Math","ceil","render","pageLinkClassName","darkContext","curSorted","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport DarkContext from \"./../../context/darkMode\";\r\nimport ReactPaginate from \"react-paginate\";\r\nimport UserContext from \"./../../context/userContext\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport axiosInstance from \"./../../baseAxios\";\r\n\r\nexport default class App extends Component {\r\n  state = { offset: 0, data: [], perPage: 6, currentPage: 0 };\r\n\r\n  static contextType = DarkContext;\r\n\r\n  componentDidMount() {\r\n    if (this.props.posts) {\r\n      this.receivedData();\r\n    }\r\n  }\r\n\r\n  renderTags = (tagList) => {\r\n    /* <button\r\n          onClick={getPostsByTag(\"latest\")}\r\n          className={\r\n            darkContext.darkMode ? \"badge badge-light\" : \"badge badge-dark\"\r\n          }\r\n        >\r\n          latest\r\n        </button>\r\n      */\r\n    return tagList.map((tag) => (\r\n      <button\r\n        key={tag.id}\r\n        onClick={() => this.props.getPostsByTag(tag.id)}\r\n        className={\"badge \" + tag.styling}\r\n      >\r\n        {tag.name}\r\n      </button>\r\n    ));\r\n  };\r\n\r\n  reactToPost = (postId, vote) => {\r\n    console.log(\"reacted to \" + postId + \" with \" + vote);\r\n  };\r\n\r\n  getFormattedRating = (rating) => {\r\n    if (rating > 999999) {\r\n      const num = (rating / 1000000).toFixed(1);\r\n      return `${num}M`;\r\n    }\r\n    if (rating > 999) {\r\n      const num = (rating / 1000).toFixed(1);\r\n      return `${num}K`;\r\n    }\r\n\r\n    return rating.toString();\r\n  };\r\n\r\n  likeDislike(post, action) {\r\n    if (action === \"like\") {\r\n      const postRate = parseInt(post.rating);\r\n      console.log(postRate, post.slug);\r\n      axiosInstance\r\n        .put(\"update-post/\", post.slug, { rating: postRate + 1 })\r\n        .then((res) => console.log(res.data))\r\n        .catch((res) => console.log(res.response));\r\n    }\r\n  }\r\n\r\n  receivedData() {\r\n    const data = this.props.posts;\r\n    const slice = data.slice(\r\n      this.state.offset,\r\n      this.state.offset + this.state.perPage\r\n    );\r\n    const postData = slice.map((post) => {\r\n      const { title, content, slug, author, image, rating } = post;\r\n      const postDate = new Intl.DateTimeFormat(\"en-GB\", {\r\n        month: \"long\",\r\n        year: \"numeric\",\r\n        day: \"numeric\",\r\n      }).format(new Date(post.published));\r\n\r\n      const day = new Date(postDate).toLocaleString(\"en-us\", {\r\n        weekday: \"long\",\r\n      });\r\n\r\n      console.log(image);\r\n\r\n      const dataType = this.context.darkMode ? \"light\" : \"dark\";\r\n\r\n      return (\r\n        <div\r\n          className={\r\n            this.context.darkMode\r\n              ? \"blog-post text-light border bg-dark\"\r\n              : \"blog-post border\"\r\n          }\r\n          key={post.id}\r\n        >\r\n          <ReactTooltip />\r\n          <div className=\"blog-post-img border\">\r\n            <img src={image} alt={\"Image for: \" + post.title} />\r\n          </div>\r\n          <div className=\"blog-post-info\">\r\n            <div className=\"blog-post-date\">\r\n              <span>{day}</span>\r\n              <span>{postDate}</span>\r\n            </div>\r\n            <div className=\"blog-post-author\">\r\n              <UserContext.Consumer>\r\n                {(userContext) => {\r\n                  return (\r\n                    <React.Fragment>\r\n                      by <span>{userContext.getAuthor(author)}</span>\r\n                    </React.Fragment>\r\n                  );\r\n                }}\r\n              </UserContext.Consumer>\r\n            </div>\r\n\r\n            <h1 className=\"blog-post-title\">{title}</h1>\r\n            <p className=\"blog-post-text\">\r\n              {content.length >= 500\r\n                ? content.substring(0, 500) + \"...\"\r\n                : content}\r\n            </p>\r\n            <Link to={\"posts/\" + slug} className=\"blog-post-cta\">\r\n              Read More\r\n            </Link>\r\n          </div>\r\n          <div className=\"blog-post-options\">\r\n            <div className=\"react\">\r\n              <div className=\"rating badge badge-primary\">\r\n                <span\r\n                  data-tip={\r\n                    \"rating: \" +\r\n                    rating.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\r\n                  }\r\n                  data-type={dataType}\r\n                >\r\n                  {rating ? this.getFormattedRating(rating) : 0}\r\n                </span>\r\n              </div>\r\n              <div className=\"upvote\">\r\n                <button\r\n                  className=\"btn btn-success\"\r\n                  data-tip=\"like\"\r\n                  data-type={dataType}\r\n                  onClick={() => this.likeDislike(post, \"like\")}\r\n                >\r\n                  <i className=\"fas fa-thumbs-up\"></i>\r\n                </button>\r\n              </div>\r\n              <div className=\"downvote\">\r\n                <button\r\n                  className=\"btn btn-danger\"\r\n                  data-tip=\"dislike\"\r\n                  data-type={dataType}\r\n                >\r\n                  <i className=\"fas fa-thumbs-down\"></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"other-react\">\r\n              <div className=\"bookmark\">\r\n                <button\r\n                  className=\"btn btn-secondary\"\r\n                  data-tip=\"add to bookmarks\"\r\n                  data-type={dataType}\r\n                >\r\n                  <i className=\"far fa-bookmark\"></i>\r\n                  {/* <i className=\"fas fa-bookmark\"></i> */}\r\n                </button>\r\n              </div>\r\n              <div\r\n                className=\"comment\"\r\n                data-tip=\"comment on this post\"\r\n                data-type={dataType}\r\n              >\r\n                <button className=\"btn btn-secondary\">\r\n                  <i\r\n                    style={{ fontSize: \".8rem\" }}\r\n                    className=\"far fa-comment-alt\"\r\n                  ></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n\r\n    this.setState({\r\n      pageCount: Math.ceil(data.length / this.state.perPage),\r\n\r\n      postData,\r\n    });\r\n  }\r\n\r\n  handlePageClick = (e) => {\r\n    const selectedPage = e.selected;\r\n    const offset = selectedPage * this.state.perPage;\r\n\r\n    this.setState({ currentPage: selectedPage, offset: offset }, () =>\r\n      this.receivedData()\r\n    );\r\n\r\n    window.scrollTo(0, 0);\r\n  };\r\n\r\n  render() {\r\n    const { posts } = this.props;\r\n    const { renderTags, reactToPost } = this;\r\n\r\n    const pageLinkClassName = this.context.darkMode\r\n      ? \" bg-dark page-link text-light\"\r\n      : \"page-link\";\r\n\r\n    return (\r\n      <DarkContext.Consumer>\r\n        {(darkContext) => (\r\n          <React.Fragment>\r\n            <main\r\n              className={\r\n                darkContext.darkMode\r\n                  ? \"bg-dark dark-page-shadow \"\r\n                  : \"bg-light border\"\r\n              }\r\n            >\r\n              <div className=\"post-tags\">\r\n                {renderTags([\r\n                  { name: \"latest\", styling: \"btn-primary\", id: \"Lat\" },\r\n                  { name: \"most popular\", styling: \"btn-success\", id: \"MPo\" },\r\n                  { name: \"least popular\", styling: \"btn-danger\", id: \"LPo\" },\r\n                  { name: \"oldest\", styling: \"btn-warning\", id: \"Old\" },\r\n                ])}\r\n              </div>\r\n\r\n              <p\r\n                className={\r\n                  darkContext.darkMode ? \"sorted-by text-light\" : \"sorted-by\"\r\n                }\r\n              >\r\n                Sorted By:{\" \"}\r\n                <span>\r\n                  <i className=\"fas fa-filter\"></i> {this.props.curSorted}\r\n                </span>\r\n              </p>\r\n\r\n              <section\r\n                className={\r\n                  darkContext.darkMode\r\n                    ? \"posts-section-dark posts-section\"\r\n                    : \"posts-section\"\r\n                }\r\n              >\r\n                {this.state.postData}\r\n              </section>\r\n            </main>{\" \"}\r\n            <ReactPaginate\r\n              previousLabel={\"previous\"}\r\n              nextLabel={\"next\"}\r\n              breakLabel={\"...\"}\r\n              breakClassName={\"break-me\"}\r\n              pageCount={this.state.pageCount}\r\n              marginPagesDisplayed={3}\r\n              pageRangeDisplayed={5}\r\n              onPageChange={this.handlePageClick}\r\n              containerClassName={\"pagination justify-content-center\"}\r\n              pageClassName={\"page-item\"}\r\n              pageLinkClassName={pageLinkClassName}\r\n              previousClassName={pageLinkClassName}\r\n              nextClassName={pageLinkClassName}\r\n              activeClassName={\"active\"}\r\n            />\r\n          </React.Fragment>\r\n        )}\r\n      </DarkContext.Consumer>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}