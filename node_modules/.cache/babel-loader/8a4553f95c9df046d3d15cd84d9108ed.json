{"ast":null,"code":"import _classCallCheck from\"C:/Users/kenny/Projects/DRF_React_YouPost/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/kenny/Projects/DRF_React_YouPost/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/kenny/Projects/DRF_React_YouPost/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/kenny/Projects/DRF_React_YouPost/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Form from\"./../common/form\";import Joi from\"./../../utils/extendedJoi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CommentsHeader=/*#__PURE__*/function(_Form){_inherits(CommentsHeader,_Form);var _super=_createSuper(CommentsHeader);function CommentsHeader(){var _this;_classCallCheck(this,CommentsHeader);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={showCommentForm:false,data:{comment:\"\"},errors:{},currentUserId:JSON.parse(atob(localStorage.getItem(\"access_token\").split(\".\")[1])).user_id};_this.schema={comment:Joi.string().max(1500).label(\"Comment\")};_this.toggleForm=function(){_this.setState({showCommentForm:!_this.state.showCommentForm});};_this.afterSubmit=function(){_this.setState({showCommentForm:false});var addComment=_this.props.addComment;var comment=_this.state.data.comment;var currentUserId=_this.state.currentUserId;addComment({author:currentUserId,text:comment});_this.setState({data:{comment:\"\"}});};return _this;}_createClass(CommentsHeader,[{key:\"afterChange\",value:function afterChange(input){}},{key:\"render\",value:function render(){var showCommentForm=this.state.showCommentForm;return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comments-header\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Comments Section\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:this.toggleForm,className:\"btn btn-outline-primary\",children:showCommentForm?\"close\":/*#__PURE__*/_jsxs(React.Fragment,{children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\" comment\"]})})})]}),this.state.showCommentForm?/*#__PURE__*/_jsx(\"div\",{className:\"comment-form\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:this.handleSubmit,children:[this.renderTextArea(\"comment\",\"Comment\"),this.renderButton(\"Submit\")]})}):\"\"]});}}]);return CommentsHeader;}(Form);export{CommentsHeader as default};","map":{"version":3,"sources":["C:/Users/kenny/Projects/drf_react_youpost/src/components/actions/commentsHeader.jsx"],"names":["React","Form","Joi","CommentsHeader","state","showCommentForm","data","comment","errors","currentUserId","JSON","parse","atob","localStorage","getItem","split","user_id","schema","string","max","label","toggleForm","setState","afterSubmit","addComment","props","author","text","input","handleSubmit","renderTextArea","renderButton"],"mappings":"gnBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,kBAAjB,CACA,MAAOC,CAAAA,GAAP,KAAgB,2BAAhB,C,2FAEqBC,CAAAA,c,iVACnBC,K,CAAQ,CACNC,eAAe,CAAE,KADX,CAENC,IAAI,CAAE,CAAEC,OAAO,CAAE,EAAX,CAFA,CAGNC,MAAM,CAAE,EAHF,CAINC,aAAa,CAAEC,IAAI,CAACC,KAAL,CACbC,IAAI,CAACC,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCC,KAArC,CAA2C,GAA3C,EAAgD,CAAhD,CAAD,CADS,EAEbC,OANI,C,OASRC,M,CAAS,CACPV,OAAO,CAAEL,GAAG,CAACgB,MAAJ,GAAaC,GAAb,CAAiB,IAAjB,EAAuBC,KAAvB,CAA6B,SAA7B,CADF,C,OAITC,U,CAAa,UAAM,CACjB,MAAKC,QAAL,CAAc,CAAEjB,eAAe,CAAE,CAAC,MAAKD,KAAL,CAAWC,eAA/B,CAAd,EACD,C,OAEDkB,W,CAAc,UAAM,CAClB,MAAKD,QAAL,CAAc,CAAEjB,eAAe,CAAE,KAAnB,CAAd,EAEA,GAAQmB,CAAAA,UAAR,CAAuB,MAAKC,KAA5B,CAAQD,UAAR,CACA,GAAQjB,CAAAA,OAAR,CAAoB,MAAKH,KAAL,CAAWE,IAA/B,CAAQC,OAAR,CACA,GAAQE,CAAAA,aAAR,CAA0B,MAAKL,KAA/B,CAAQK,aAAR,CAEAe,UAAU,CAAC,CAAEE,MAAM,CAAEjB,aAAV,CAAyBkB,IAAI,CAAEpB,OAA/B,CAAD,CAAV,CAEA,MAAKe,QAAL,CAAc,CAAEhB,IAAI,CAAE,CAAEC,OAAO,CAAE,EAAX,CAAR,CAAd,EACD,C,qEAED,qBAAYqB,KAAZ,CAAmB,CAAE,C,sBAErB,iBAAS,CACP,GAAQvB,CAAAA,eAAR,CAA4B,KAAKD,KAAjC,CAAQC,eAAR,CACA,mBACE,MAAC,KAAD,CAAO,QAAP,yBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,uCADF,cAEE,gCACE,eACE,OAAO,CAAE,KAAKgB,UADhB,CAEE,SAAS,CAAC,yBAFZ,UAIGhB,eAAe,CACd,OADc,cAGd,MAAC,KAAD,CAAO,QAAP,YACG,GADH,cAEE,UAAG,SAAS,CAAC,aAAb,EAFF,cAPJ,EADF,EAFF,GADF,CAmBG,KAAKD,KAAL,CAAWC,eAAX,cACC,YAAK,SAAS,CAAC,cAAf,uBACE,cAAM,MAAM,CAAC,EAAb,CAAgB,QAAQ,CAAE,KAAKwB,YAA/B,WACG,KAAKC,cAAL,CAAoB,SAApB,CAA+B,SAA/B,CADH,CAEG,KAAKC,YAAL,CAAkB,QAAlB,CAFH,GADF,EADD,CAQC,EA3BJ,GADF,CAgCD,C,4BAlEyC9B,I,SAAvBE,c","sourcesContent":["import React from \"react\";\r\nimport Form from \"./../common/form\";\r\nimport Joi from \"./../../utils/extendedJoi\";\r\n\r\nexport default class CommentsHeader extends Form {\r\n  state = {\r\n    showCommentForm: false,\r\n    data: { comment: \"\" },\r\n    errors: {},\r\n    currentUserId: JSON.parse(\r\n      atob(localStorage.getItem(\"access_token\").split(\".\")[1])\r\n    ).user_id,\r\n  };\r\n\r\n  schema = {\r\n    comment: Joi.string().max(1500).label(\"Comment\"),\r\n  };\r\n\r\n  toggleForm = () => {\r\n    this.setState({ showCommentForm: !this.state.showCommentForm });\r\n  };\r\n\r\n  afterSubmit = () => {\r\n    this.setState({ showCommentForm: false });\r\n\r\n    const { addComment } = this.props;\r\n    const { comment } = this.state.data;\r\n    const { currentUserId } = this.state;\r\n\r\n    addComment({ author: currentUserId, text: comment });\r\n\r\n    this.setState({ data: { comment: \"\" } });\r\n  };\r\n\r\n  afterChange(input) {}\r\n\r\n  render() {\r\n    const { showCommentForm } = this.state;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"comments-header\">\r\n          <p>Comments Section</p>\r\n          <p>\r\n            <button\r\n              onClick={this.toggleForm}\r\n              className=\"btn btn-outline-primary\"\r\n            >\r\n              {showCommentForm ? (\r\n                \"close\"\r\n              ) : (\r\n                <React.Fragment>\r\n                  {\" \"}\r\n                  <i className=\"fas fa-plus\"></i> comment\r\n                </React.Fragment>\r\n              )}\r\n            </button>\r\n          </p>\r\n        </div>\r\n        {this.state.showCommentForm ? (\r\n          <div className=\"comment-form\">\r\n            <form action=\"\" onSubmit={this.handleSubmit}>\r\n              {this.renderTextArea(\"comment\", \"Comment\")}\r\n              {this.renderButton(\"Submit\")}\r\n            </form>\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}